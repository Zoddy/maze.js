var maze=function(sizeX,sizeY){return maze._directions=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0}],maze._links={},maze._path=[],maze._size={x:sizeX,y:sizeY},maze._visitCount=0,maze._visited={},maze._create({x:maze._random(1,maze._size.x),y:maze._random(1,maze._size.y)}),maze._links};maze._create=function(room){var nextRoom;void 0===maze._visited[room.x+","+room.y]&&(maze._visited[room.x+","+room.y]=!0,++maze._visitCount),nextRoom=maze._getDirection(room),nextRoom===!1?maze._visitCount<maze._size.x*maze._size.y&&maze._create(maze._path.pop()):(maze._path.push(room),maze._links[room.x+","+room.y+"_"+nextRoom.x+","+nextRoom.y]=[room,nextRoom],maze._create(nextRoom))},maze._getDirection=function(room){var direction,nextRoom,directions=[];return 1===room.y||maze._visited[room.x+","+(room.y-1)]||directions.push(1),room.x===maze._size.x||maze._visited[room.x+1+","+room.y]||directions.push(2),room.y===maze._size.y||maze._visited[room.x+","+(room.y+1)]||directions.push(3),1===room.x||maze._visited[room.x-1+","+room.y]||directions.push(4),0===directions.length?nextRoom=!1:(direction=directions[maze._random(0,directions.length-1)]-1,nextRoom={x:room.x+maze._directions[direction].x,y:room.y+maze._directions[direction].y}),nextRoom},maze._random=function(min,max){return min+parseInt(Math.random()*(max-min+1))};